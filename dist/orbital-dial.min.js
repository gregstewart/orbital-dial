function OrbitalDial(a){function s(a){var b=Math.min(i,j)/2,c=Math.max(k,l)/2,n=b+a.y*m-c,o=b-a.x*m-c;d.css({left:n,top:o}),typeof e!="undefined"&&(c=Math.max(f,g)/2,n=b+a.y*h-c,o=b-a.x*h-c,e.css({left:n,top:o}))}function t(a){var b=typeof a.pageX!="undefined"?a.pageX:typeof a.originalEvent!="undefined"?a.originalEvent.touches[0].pageX:null,c=typeof a.pageY!="undefined"?a.pageY:typeof a.originalEvent!="undefined"?a.originalEvent.touches[0].pageY:null;r=new Point(b,c)}function u(a){var d,e,f,g,h;a.preventDefault(),h=Math.max(i,j)/2,d=r.shift(c.offset().left+h,c.offset().top+h),e=Math.round(d.calculatePiAngle()/Math.PI*180),b.drawByAngle(e),o(e)}function v(){$(document).on("mousedown.dial touchstart.dial",function(a){a.preventDefault(),t(a)}).on("mousemove.dial touchmove.dial",function(a){a.preventDefault(),t(a),u(a)}).on("mouseup.dial touchend.dial",function(a){$(document).off(".dial"),a.preventDefault(),u(a)})}function w(){return Math.min(i,j)/2-Math.max(k,l)/2}function x(){d.off("**"),c.on("mousedown.dial touchstart.dial",function(a){a.preventDefault(),v(a)})}function y(){var b,r=a||{};b={containerSelector:"#OrbitalDial",innerSelector:"#Slider",outerElementWidth:50,outerElementHeight:50,outerRatio:6.5/7,containerWidth:200,containerHeight:200,innerElementWidth:50,innerElementHeight:50,innerRatio:1/3,startAngle:0,onMoveCallBack:function(){},onMoveEndCallBack:function(){}},$.extend(b,r),c=$(b.containerSelector),d=$(b.innerSelector),typeof b.outerSelector!="undefined"&&(e=$(b.outerSelector),f=e.data("width")||b.outerElementWidth,g=e.data("height")||b.outerElementHeight,h=e.data("ratio")||b.outerRatio),i=c.data("width")||b.containerWidth,j=c.data("height")||b.containerHeight,k=d.data("width")||b.innerElementWidth,l=d.data("height")||b.innerElementHeight,m=d.data("ratio")||b.innerRatio,n=d.data("start-angle")||b.startAngle,o=b.onMoveCallBack,p=b.onMoveEndCallBack,q=w(),x(),s((new Triangle(q,n)).toPoint()),d.is(":visible")||d.show(),typeof e!="undefined"&&!e.is(":visible")&&e.show()}"use strict";var b=this,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r;b.getCurrentPoint=function(){return r},b.drawByAngle=function(a){s((new Triangle(q,a)).toPoint())},y()}function Triangle(a,b){"use strict";var c=this,d=b/180*Math.PI,e=a*Math.sin(d),f=a*Math.cos(d);c.toPoint=function(){return new Point(f,e)}}function Point(a,b){"use strict";var c=this;c.x=a,c.y=b,c.calculatePiAngle=function(){var c=Math.atan2(a,b);return c<0&&(c+=Math.PI*2),c},c.shift=function(a,b){return new Point(c.x-a,b-c.y)}};